angular.module("jsPassword").service("EntriesCollection",["$rootScope","DB",function(t,e){this.masterAllEntries=e.init(),this.allEntries=_.groupBy(this.masterAllEntries,function(t){return t.data.Name.value.charAt(0).toLowerCase()}),this.entries=_.clone(this.allEntries),this.size=function(){return _.size(this.masterAllEntries)},this.at=function(t){return this.masterAllEntries[t]},this.showAllEntries=function(){this.entries=_.clone(this.allEntries),t.$broadcast("EntriesCollection::changed")},this.showFavoriteEntries=function(){var e=_.clone(this.allEntries),i={};_.each(e,function(t,e){_.each(t,function(t){t.data.Favorite.value&&(_.has(i,e)||(i[e]=[]),i[e].push(t))})}),this.entries=i,t.$broadcast("EntriesCollection::changed")},this["new"]=function(t){var i=e["new"](t);return this.masterAllEntries.push(i),this.allEntries=_.groupBy(this.masterAllEntries,function(t){return t.data.Name.value.charAt(0).toLowerCase()}),this.entries=_.clone(this.allEntries),i},this.prepareNew=function(){return e.prepareNew()},this.find=function(t){var e={};return _.each(this.entries,function(i,n){_.each(i,function(i){return i.id==t?e=i:void 0}),e}),e.data},this.update=function(t,i){e.update(t,i),_.find(this.masterAllEntries,function(e){return e.id==t?(e.data=i,!0):!1}),this.allEntries=_.groupBy(this.masterAllEntries,function(t){return t.data.Name.value.charAt(0).toLowerCase()}),this.entries=_.clone(this.allEntries)}}]);